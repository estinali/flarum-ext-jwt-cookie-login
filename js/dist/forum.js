(()=>{var e={n:o=>{var t=o&&o.__esModule?()=>o.default:()=>o;return e.d(t,{a:t}),t},d:(o,t)=>{for(var n in t)e.o(t,n)&&!e.o(o,n)&&Object.defineProperty(o,n,{enumerable:!0,get:t[n]})},o:(e,o)=>Object.prototype.hasOwnProperty.call(e,o),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},o={};(()=>{"use strict";e.r(o);const t=flarum.core.compat["forum/app"];var n=e.n(t);const r=flarum.core.compat["common/extend"],a=flarum.core.compat["common/components/Button"];var i=e.n(a);const l=flarum.core.compat["forum/ForumApplication"];var s=e.n(l);n().initializers.add("jwt-cookie-login",(function(){(0,r.extend)(s().prototype,"mount",(function(){var e=n().forum.attribute("jwtIframe");if(e){var o=new Date,t=!1,r=!1,a=new URL(e);window.addEventListener("message",(function(e){if(e.origin===a.origin&&"object"==typeof e.data&&e.data.hasOwnProperty("jwtSessionState"))switch(e.data.jwtSessionState){case"login":if(n().session.user||t)return;if((new Date).getTime()-o.getTime()<n().forum.attribute("autoLoginDelay"))return void window.location.reload();t=!0,l("success","login");break;case"logout":if(!n().session.user||r)return;r=!0,l("error","logout")}function l(e,o){n().alerts.show({type:e,controls:[i().component({className:"Button Button--link",onclick:function(){window.location.reload()}},n().translator.trans("clarkwinkelmann-jwt-cookie-login.forum.alert.refresh"))]},n().translator.trans("clarkwinkelmann-jwt-cookie-login.forum.alert."+o))}}),!1);var l=document.createElement("iframe");l.src=e,l.width="0",l.height="0",l.style.position="absolute",l.style.top="-1000px;",l.style.left="-1000px",document.body.appendChild(l)}}))}))})(),module.exports=o})();
//# sourceMappingURL=forum.js.map